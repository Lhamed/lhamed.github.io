---
layout: post
title: Mac 환경에서,  Jenkins 를 이용한 , Unity 2017.4.24f , Github 푸시 Gradle Build 자동 빌드 , 구글 플레이 스토어 배포 까지 구현해보자 - 1 - 
description: "Be A Writer Before Being Typer Before Being Coder Before Being Programer"
modified: 2019-6-22
tags: [ jenkins , Unity , ci , cd  ] 
---

> ( 참고로 , 급 존댓말 포스팅 입니다. )

-----------------------------------------
## 서문
-----------------------------------------

안녕하세요. 

게임 개발자 라메드 입니다. 

젠킨스를 통해서 CI / CD 를 하는 것이 뭐 딱히 엄청나게 새로운 주제거나 기술인 것은 아니지만, 

젠킨스를 통한 자동 빌드와 배포를 구현하면서 

2년차 Untiy 개발자인 제 눈높이에서는 , 굉장히 귀찮고 세팅 때문에 계속해서 노가다를 뛰게 되는 경험을 좀 했습니다.

그래서 미래의 제가 보기에 , 또한 비슷한 상황의 누군가가 보고 쉽게 따라할 수 있도록 비교적 자세하게 적어보겠습니다. 

--------------------------------------------------
## 본문 (1) : 빌드 머신의 세팅
--------------------------------------------------

이 글에서 말하는 빌드 머신은, 다른 네트워크에 속한 빌드를 위한 컴퓨터를 가정합니다. 

또한 제 경우에는 Mac OSX 모하비 에서 작업했습니다. ( Window 의 경우는 상당히 다를 수 있습니다. )

제 경우에는 집에서 놀고 있던 MacBook 2012 를 완전히 초기화 하고 시작했습니다. 

### 네트워크 설정 


- 공유기를 사용하시면, 해당 컴퓨터의 내부 ip 에 포트포워딩을 해줍니다. 
    - ( 자세한 방법은 생략합니다. 192.168.0.1 에 들어가면 보통 관리자 페이지가 있을 겁니다. )
    - 포트포워딩을 해주는 이유는 , github push 에 대해서 webhook 설정을 할 때에 받을 주소가 필요하기 때문입니다. 
    - 사정상 포트포워딩을 할 수 없다면, node.js + ngrok 같은 대안도 있습니다. ( 젠킨스 포트에 대한 주소를 할당 받는 식 )
        - ( 역시나 자세한 설명은 생략합니다. )
- 노트북의 경우에는 전기 소모를 줄이기 위해서 키보드 백 라이트를 끄고 , 모니터 밝기를 줄이고 ... 등등의 절전 세팅도 해줍시다. 
- 외부 작업 후, 젠킨스가 꼬이거나 밖에서도 관리하고 싶으시다면 원격제어도 걸어두시거나 SSH 접속도 세팅해두시기를 추천드립니다.     

우선, 설치부터 진행합시다.

설치해야할 목록은 다음과 같아요. 

-------------------------------------------------------------------------------
## 본문 (2) : 젠킨스 기초 세팅
-------------------------------------------------------------------------------

### 설치 목록 

- Jenkins 
    - 오늘의 주인공 입니다. 빌드와 배포를 주로 맡아줄 친구입니다. 아이콘 부터 집사같은 생김새를 하고 있죠. 
    - 설치 & 최초 설정 방법 
        1. Homebrew 를 설치한다
            - Terminal 을 열어줍니다. 
            - 다음과 같이 입력해줍니다. 
                 ``` sh
                /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
                ```
            - 대략 무언가 현란하게 뜹니다. 다 될때까지 기다립니다.
        2. brew 를 이용해서 Jenkins 를 설치해줍니다. 
            - Terminal 에 다음과 같이 입력해줍니다. 
                ``` sh
                brew install jenkins
                ```
        3. brew 를 이용해서 Jenkins 를 시작해줍니다. 
            - Terminal 에 다음과 같이 입력해줍니다. 
                ``` sh
                brew services start jenkins
                ```
        4. jekins 가 작동하는지 확인할겸 들어가봅니다. 초기 세팅은 8080 포트로 되어있을 겁니다. 
            - Terminal 에 다음과 같이 입력해줍니다. ( 젠킨스 관리 페이지로 이동합니다. )
                ``` sh
                open http://localhost:8080
                ```
        5. 관리 페이지에 접속하고 , 성공적으로 jenkins 가 설치 되었다면, "Unlock Jenkins" 라는 창이 뜰겁니다. 시작을 위해서 다음과 같이 세팅해줍니다. 
            - __붉은 글씨로 표시된 경로__ 를 복사 하셔서 터미널로 이동해주세요.
            - Terminal 에 다음과 같이 입력해줍니다. 
                ``` sh
                cat {붉은 글씨로 표시된 경로}
                ```
            - 위 입력으로 나온 비밀번호를 복사하고 , 다음을 입력합니다. 
            - Terminal 에 다음과 같이 입력해줍니다. ( 젠킨스 관리 페이지로 이동합니다. )
                ``` sh
                open http://localhost:8080
                ```
        6. "Customize Jenkins" 창이 뜹니다. 기본적인 플러그인들을 설치해줍시다. 
            - 좌측의 " Install suggested plugins" 를 클릭해서 제안된 플러그인들을 설치해줍니다. 
        7. 설치를 마치면, "Creat First Admin User" 창이 뜹니다. 첫 관리 아이디를 설정해줍니다. 
            - 어디다 적어놓읍시다. 까먹으면 골치아픔 ( 물론 방법이 있지만 여백이 부족해서 적지 않겠습니다. 까먹지 않는 것이 제일 좋습니다. )
            - 이제 초기 설정을 마쳤습니다! "Start Using Jenkins" 버튼을 눌러 대시보드로 들어가시면 됩니다. 

> 작성중입니다 .. 틈나는대로 작성하고 있어요 ㅠ_ㅠ 자세하게 적어보려니 생각보다 양이 많네요... 


--------------------------------------------------
